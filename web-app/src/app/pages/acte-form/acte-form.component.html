<div>
    <div class="header">
        <div class="container">
            <p class="display-4">Télétransmission des {{ acteName }}</p>
        </div>
    </div>
    <div class="acte-form-content">
        <div class="content-box">
            <div *ngFor="let field of fields" class="input-container" [ngSwitch]="field.type">
                <meg-text-input *ngSwitchCase="'text'" [key]="field.key" [required]="field['requis']"
                    [pregMatch]="field['preg_match']" [commentaire]="field['commentaire']"
                    [multiple]="field['multiple']" [index]="field['index']" [name]="field['name']"
                    [pregMatchError]="field['preg_match_error']">
                </meg-text-input>

                <meg-checkbox-input *ngSwitchCase="'checkbox'" [key]="field.key" [name]="field['name']"
                    [required]="field['requis']" [readOnly]="field['read-only']"
                    [defaultChecked]="field['default'] === 'checked'">
                </meg-checkbox-input>

                <meg-select-input *ngSwitchCase="'select'" [key]="field.key" [name]="field['name']"
                    [required]="field['requis']" [multiple]="field['multiple']" [readOnly]="field['read-only']"
                    [options]="field['value']" [commentaire]="field['commentaire']">
                </meg-select-input>

                <meg-date-input *ngSwitchCase="'date'" [key]="field.key" [name]="field['name']"
                    [required]="field['requis']" [default]="field['default']" [commentaire]="field['commentaire']">
                </meg-date-input>

                <meg-file-upload *ngSwitchCase="'file'" [key]="field.key" [name]="field['name']"
                    [required]="field['requis']" [multiple]="field['multiple']" [commentaire]="field['commentaire']">
                </meg-file-upload>

                <meg-external-data-input *ngSwitchCase="'externalData'" [key]="field.key" [name]="field['name']"
                    [required]="field['requis']" [link_name]="field['link_name']">
                </meg-external-data-input>
            </div>
            <div class="fr-fieldset__element">
                <ul class="fr-btns-group--right fr-btns-group fr-btns-group--inline">
                    <li>
                        <button class="fr-mt-2v fr-btn" type="button" (click)="enregistrer()" data-fr-opened="false"
                            aria-controls="fr-modal">Enregistrer</button>
                    </li>
                    <li>
                        <button class="fr-mt-2v fr-btn" type="button" (click)="transmettre()" data-fr-opened="false"
                            aria-controls="fr-modal">Transmettre</button>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<dialog aria-labelledby="fr-modal-title" role="dialog" id="fr-modal" class="fr-modal">
    <div class="fr-container fr-container--fluid fr-container-md">
        <div class="fr-grid-row fr-grid-row--center">
            <div class="fr-col-12 fr-col-md-8 fr-col-lg-6">
                <div class="fr-modal__body">
                    <div class="fr-modal__header">
                        <button class="fr-btn--close fr-btn" title="Fermer la fenêtre modale" aria-controls="fr-modal"
                            (click)="closeModal()">Fermer</button>
                    </div>
                    <div class="fr-modal__content">
                        <p class="fr-badge" [class]=" isSuccess ? 'fr-badge--success' :'fr-badge--error'"> {{ isSuccess
                            ? 'Succès' : 'Erreur' }}
                        </p>
                        <p>{{ modalMessage }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</dialog>